<!DOCTYPE html> 
<html lang="ja">
    <head>
        <script language="JavaScript" type="text/javascript" src="jsbn.js"></script>
        <script language="JavaScript" type="text/javascript" src="random.js"></script>
        <script language="JavaScript" type="text/javascript" src="hash.js"></script>
        <script language="JavaScript" type="text/javascript" src="rsa.js"></script>
        <script language="JavaScript" type="text/javascript" src="aes.js"></script>
        <script language="JavaScript" type="text/javascript" src="api.js"></script>
        <meta charset="utf-8">
        <title></title>
        <style>
            html{
                 font-family:sans-serif;
            }
        </style>
        <script>
            var pass = "pass";
            var bits = 1024;
            var rsakey = cryptico.generateRSAKey(pass, bits);
            function elm(id){
                return document.getElementById(id)
            }
            function ango(){
                
                var public = cryptico.publicKeyString(rsakey);
                var PlainText = elm("word").value;
                var StringFrom = PlainText; // 変換する文字列
                var displaceNumber = Number(elm("key").value); // ずらす数
                var StringAfter = [];
                // 変換後の文字格納変数  
                StringFrom = StringFrom.split(''); 
                // 一文字づつに分解、配列化 
                for(var i=0;i<StringFrom.length;i++){
                    StringAfter[i] = String.fromCharCode(StringFrom[i].charCodeAt() + displaceNumber);
                    // 変換 
                };
                StringAfter = StringAfter.join(''); // 配列の連結
                var EncryptionResult = cryptico.encrypt(StringAfter, public);
                
                
                elm("res").innerText = EncryptionResult.cipher
                var textarea = document.getElementsByTagName("textarea")[0];
// 文字をすべて選択
textarea.select();
// コピー
document.execCommand("copy");
            }
            function fuku(){
                var CipherText = elm("word").value;
                var DecryptionResult = cryptico.decrypt(CipherText, rsakey);
                var StringFrom = DecryptionResult.plaintext; // 変換する文字列
                var displaceNumber = Number("-" + elm("key").value); // ずらす数
                var StringAfter = [];
                // 変換後の文字格納変数  
                StringFrom = StringFrom.split(''); 
                // 一文字づつに分解、配列化 
                for(var i=0;i<StringFrom.length;i++){
                    StringAfter[i] = String.fromCharCode(StringFrom[i].charCodeAt() + displaceNumber);
                    // 変換 
                };
                StringAfter = StringAfter.join(''); // 配列の連結
                elm("res").innerText = StringAfter
                

            }
        </script>
    </head>
    <body>
        <input type="text" id="word">
        <input id="key" placeholder="キー">
        <button id="btn" onclick="ango()">暗号化</button>
        <button id="fukugo" onclick="fuku()">複合化</button>
        <textarea id="res"></p>
    </body>
    <script>
        
    </script>
</html>
